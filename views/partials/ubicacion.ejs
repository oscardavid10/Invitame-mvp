<%
  const anim = theme.animations?.ubicacion || {};
  const animClass = anim.in ? `animate__animated animate__${anim.in}` : '';
  const animOutAttr = anim.out ? `data-anim-out="${anim.out}"` : '';
%>
<section class="py-12 <%= animClass %>" <%- animOutAttr %>>
  <div class="container mx-auto px-5 grid md:grid-cols-2 gap-6 items-stretch">
    <% 
      const hasReception = !!(data.address && data.address.trim());
      const hasCeremony  = !!(data.ceremony_address && data.ceremony_address.trim());
const showReceptionMap = theme.meta?.show_map ?? data.show_map ?? true;
      const showCeremonyMap  = theme.meta?.show_ceremony_map ?? data.show_ceremony_map ?? true;
    %>

    <% if (hasCeremony) { %>
      <div class="card">
        <h3 class="font-display text-xl">Ceremonia</h3>
        <p class="mt-2 text-[var(--ring)]">
          <%= data.ceremony_venue || '' %><% if (data.ceremony_venue && data.ceremony_address) { %><br/><% } %>
          <%= data.ceremony_address %>
        </p>

        <% if (showCeremonyMap) { 
             const ceremonyQ = encodeURIComponent(data.ceremony_address);
        %>
          <div class="mt-4 rounded-2xl overflow-hidden ring-1 ring-white/10">
            <iframe
              src="https://www.google.com/maps?q=<%= ceremonyQ %>&output=embed"
              width="100%" height="100%" style="min-height:320px" loading="lazy">
            </iframe>
          </div>
        <% } %>

        <div class="mt-4 flex gap-3">
          <a class="btn btn-ghost" target="_blank" href="https://www.google.com/maps?q=<%= encodeURIComponent(data.ceremony_address) %>">
            Abrir en Maps
          </a>
        </div>
      </div>
    <% } %>

    <% if (hasReception) { %>
      <div class="card">
        <h3 class="font-display text-xl">Recepci√≥n</h3>
        <p class="mt-2 text-[var(--ring)]">
          <%= data.venue %><% if (data.venue && data.address) { %><br/><% } %>
          <%= data.address %>
        </p>

        <% if (showReceptionMap) { 
             const receptionQ = encodeURIComponent(data.address);
        %>
          <div class="mt-4 rounded-2xl overflow-hidden ring-1 ring-white/10">
            <iframe
              src="https://www.google.com/maps?q=<%= receptionQ %>&output=embed"
              width="100%" height="100%" style="min-height:320px" loading="lazy">
            </iframe>
          </div>
        <% } %>

        <div class="mt-4 flex gap-3">
          <a class="btn btn-ghost" target="_blank" href="https://www.google.com/maps?q=<%= encodeURIComponent(data.address) %>">
            Abrir en Maps
          </a>
        </div>
      </div>
    <% } %>
  </div>
</section>
